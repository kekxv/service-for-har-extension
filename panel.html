<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>HAR Replay Control Panel</title>
  <!-- [No changes to <style> block] -->
  <style>
    :root { --bg-color: #f8f9fa; --panel-bg: #ffffff; --text-color: #212529; --border-color: #dee2e6; --primary: #007bff; --danger: #dc3545; --success: #28a745; --warning: #ffc107; --light-gray: #6c757d; }
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; padding: 1em; background-color: var(--bg-color); }
    .panel { background: var(--panel-bg); padding: 1.5rem; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); margin-bottom: 1.5em; }
    h2 { border-bottom: 1px solid var(--border-color); padding-bottom: 0.75rem; margin-top: 0; margin-bottom: 1rem; font-size: 1.25rem; }
    ul { list-style: none; padding: 0; margin: 0; }
    .toggle-container { display: flex; align-items: center; gap: 10px; }
    button { border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer; transition: filter 0.2s; font-weight: 500; }
    button:hover { filter: brightness(0.9); }
    .btn-primary { background-color: var(--primary); color: white; }
    .file-list li { display: flex; justify-content: space-between; align-items: center; padding: 0.75rem 1rem; border-bottom: 1px solid #e9ecef; }
    button.delete { background-color: transparent; color: var(--danger); font-size: 1.2rem; padding: 0.25rem; }
    .switch { position: relative; display: inline-block; width: 60px; height: 34px; }
    .switch input { opacity: 0; width: 0; height: 0; }
    .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px; }
    .slider:before { position: absolute; content: ""; height: 26px; width: 26px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; }
    input:checked + .slider { background-color: var(--success); }
    input:checked + .slider:before { transform: translateX(26px); }
    /* [NEW] Style for disabled toggle */
    input:disabled + .slider { background-color: #e9ecef; cursor: not-allowed; }
    #endpointSearch { width: 100%; padding: 0.5rem 0.75rem; border: 1px solid var(--border-color); border-radius: 5px; margin-bottom: 1rem; font-size: 1em; box-sizing: border-box; }
    .endpoint-item { display: flex; justify-content: space-between; align-items: center; gap: 1rem; padding: 0.75rem 1rem; border: 1px solid #e9ecef; border-radius: 5px; margin-bottom: 0.5rem; background-color: #fdfdfd;}
    .endpoint-path { flex-grow: 1; font-family: monospace; min-width: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .method-badge { font-weight: bold; color: white; padding: 0.2em 0.6em; border-radius: 4px; font-size: 0.8em; text-align: center; min-width: 60px; flex-shrink: 0; }
    .method-get { background-color: #007bff; } .method-post { background-color: #28a745; } .method-put { background-color: #ffc107; }
    .method-delete { background-color: #dc3545; } .method-patch { background-color: #17a2b8; } .method-options, .method-head { background-color: #6f42c1; }
    .count-badge { background-color: #e9ecef; color: var(--light-gray); padding: 0.2em 0.6em; border-radius: 10px; font-size: 0.8em; font-family: monospace; }
  </style>
</head>
<body>
<h1>HAR Replay Control Panel</h1>
<div class="panel">
  <h2>Replay Control</h2>
  <div class="toggle-container">
    <label class="switch">
      <input type="checkbox" id="toggleReplay">
      <span class="slider"></span>
    </label>
    <span id="replayStatus">Replay is INACTIVE</span>
  </div>
  <!-- [MODIFIED] Use a dedicated element for the description -->
  <p><em id="replayDescription">Enable to start intercepting requests for this tab.</em></p>
</div>
<!-- Other panels remain the same -->
<div class="panel">
  <h2>File Management</h2>
  <input type="file" id="harFileInput" accept=".har" multiple>
  <button id="uploadButton" class="btn-primary">Load Selected HAR File(s)</button>
  <h3>Loaded Files</h3>
  <ul id="fileList" class="file-list"></ul>
</div>
<div class="panel">
  <h2 id="endpointHeader">Loaded Endpoints (0)</h2>
  <input type="text" id="endpointSearch" placeholder="Search by method or path (e.g., 'get /api/users')...">
  <ul id="endpointList"></ul>
</div>
<script src="panel.js"></script>
</body>
</html>
